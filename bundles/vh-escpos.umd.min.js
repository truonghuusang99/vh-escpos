!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("html-to-image")):"function"==typeof define&&define.amd?define("vh-escpos",["exports","@angular/core","html-to-image"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["vh-escpos"]={},t.ng.core,t.htmlToImage)}(this,(function(t,e,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var n=r(e);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function o(t,e,i,r){return new(i||(i=Promise))((function(n,o){function T(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(T,s)}u((r=r.apply(t,e||[])).next())}))}function T(t,e){var i,r,n,o,T={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;T;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return T.label++,{value:o[1],done:!1};case 5:T.label++,r=o[1],o=[0];continue;case 7:o=T.ops.pop(),T.trys.pop();continue;default:if(!(n=T.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){T=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){T.label=o[1];break}if(6===o[0]&&T.label<n[1]){T.label=n[1],n=o;break}if(n&&T.label<n[2]){T.label=n[2],T.ops.push(o);break}n[2]&&T.ops.pop(),T.trys.pop();continue}o=e.call(t,T)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function s(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),T=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)T.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return T}Object.create;var u,h,a,_,f,l,c,E,O,d,A,L,p,R,C=function(){function t(t){void 0===t&&(t=1024),this.buffer=new Uint8Array(t),this.size=0}return t.prototype.clear=function(){this.size=0},t.prototype.flush=function(){var t=new Uint8Array(this.buffer.slice(0,this.size));return this.size=0,t},t.prototype.write=function(t){return this.resize(t.length),this.buffer.set(t,this.size),this.size+=t.length,this},t.prototype.writeUInt8=function(t){return this.resize(1),this.buffer[this.size++]=255&t,this},t.prototype.writeUInt32LE=function(t,e){return this.resize(4),this.buffer[this.size++]=255&t,this.buffer[this.size++]=t>>8&255,this.buffer[this.size++]=t>>16&255,this.buffer[this.size++]=t>>24&255,this},t.prototype.writeUInt16LE=function(t,e){return this.resize(2),this.buffer[this.size++]=255&t,this.buffer[this.size++]=t>>8&255,this},t.prototype.resize=function(t){var e=this.buffer.length-this.size;if(e<t){var i=this.buffer,r=Math.ceil((t-e)/i.length)+1;this.buffer=new Uint8Array(i.length*r),this.buffer.set(i,0)}},t}(),F={LF:"\n",FS:"",FF:"\f",GS:"",DLE:"",EOT:"",NUL:"\0",ESC:"",TAB:"t",EOL:"\n"};F.FEED_CONTROL_SEQUENCES={CTL_LF:"\n",CTL_GLF:"J\0",CTL_FF:"\f",CTL_CR:"\r",CTL_HT:"\t",CTL_VT:"\v"},F.CHARACTER_SPACING={CS_DEFAULT:" \0",CS_SET:" "},F.LINE_SPACING={LS_DEFAULT:"2",LS_SET:"3"},F.HARDWARE={HW_INIT:"@",HW_SELECT:"=",HW_RESET:"?\n\0"},F.CASH_DRAWER={CD_KICK_2:"p\0Ãº",CD_KICK_5:"pÃº"},F.MARGINS={BOTTOM:"O",LEFT:"l",RIGHT:"Q"},F.PAPER={PAPER_FULL_CUT:"V\0",PAPER_PART_CUT:"V",PAPER_CUT_A:"VA",PAPER_CUT_B:"VB"},F.TEXT_FORMAT={TXT_NORMAL:"!\0",TXT_2HEIGHT:"!",TXT_2WIDTH:"! ",TXT_4SQUARE:"!0",TXT_CUSTOM_SIZE:function(t,e){var i=16*(t-1)+(e-1);return"!"+String.fromCharCode(i)},TXT_HEIGHT:{1:"\0",2:"",3:"",4:"",5:"",6:"",7:"",8:""},TXT_WIDTH:{1:"\0",2:"",3:" ",4:"0",5:"@",6:"P",7:"`",8:"p"},TXT_UNDERL_OFF:"-\0",TXT_UNDERL_ON:"-",TXT_UNDERL2_ON:"-",TXT_BOLD_OFF:"E\0",TXT_BOLD_ON:"E",TXT_ITALIC_OFF:"5",TXT_ITALIC_ON:"4",TXT_FONT_A:"M\0",TXT_FONT_B:"M",TXT_FONT_C:"M",TXT_ALIGN_LT:"a\0",TXT_ALIGN_CT:"a",TXT_ALIGN_RT:"a"},F.MODEL={QSPRINTER:{BARCODE_MODE:{ON:"EC",OFF:"EC\0"},BARCODE_HEIGHT_DEFAULT:"hÂ¢",CODE2D_FORMAT:{PIXEL_SIZE:{CMD:"##QPIX",MIN:1,MAX:24,DEFAULT:12},VERSION:{CMD:"(k\x001C",MIN:1,MAX:16,DEFAULT:3},LEVEL:{CMD:"(k\x001E",OPTIONS:{L:48,M:49,Q:50,H:51}},LEN_OFFSET:3,SAVEBUF:{CMD_P1:"(k",CMD_P2:"1P0"},PRINTBUF:{CMD_P1:"(k",CMD_P2:"1Q0"}}}},F.CODE2D_FORMAT={TYPE_PDF417:F.GS+"Z\0",TYPE_DATAMATRIX:F.GS+"Z",TYPE_QR:F.GS+"Z",CODE2D:F.ESC+"Z",QR_LEVEL_L:"L",QR_LEVEL_M:"M",QR_LEVEL_Q:"Q",QR_LEVEL_H:"H"},F.IMAGE_FORMAT={S_RASTER_N:"v0\0",S_RASTER_2W:"v0",S_RASTER_2H:"v0",S_RASTER_Q:"v0"},F.BITMAP_FORMAT={BITMAP_S8:"*\0",BITMAP_D8:"*",BITMAP_S24:"* ",BITMAP_D24:"*!"},F.GSV0_FORMAT={GSV0_NORMAL:"v0\0",GSV0_DW:"v0",GSV0_DH:"v0",GSV0_DWDH:"v0"},F.BEEP="B",F.COLOR={0:"r\0",1:"r",REVERSE:"B1",UNREVERSE:"B0"},F.SCREEN={BS:"\b",HT:"\t",LF:"\n",US_LF:"\n",HOM:"\v",CR:"\r",US_CR:"\r",US_B:"B",US_$:"$",CLR:"\f",CAN:"",US_MD1:"",US_MD2:"",US_MD3:"",US_C:"C",US_E:"E",US_T:"T",US_U:"U",US_X:"X",US_r:"r",US_v:"v"},function(t){t[t.NoUnderline=0]="NoUnderline",t[t.Single=1]="Single",t[t.Double=2]="Double"}(u||(u={})),function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(h||(h={})),function(t){t[t.Pin2=0]="Pin2",t[t.Pin5=1]="Pin5"}(a||(a={})),function(t){t[t.A=0]="A",t[t.B=1]="B",t[t.C=2]="C"}(_||(_={})),function(t){t[t.UPCA=0]="UPCA",t[t.UPCE=1]="UPCE",t[t.EAN13=2]="EAN13",t[t.EAN8=3]="EAN8",t[t.CODE39=4]="CODE39",t[t.ITF=5]="ITF",t[t.CODABAR=6]="CODABAR",t[t.CODE93=7]="CODE93",t[t.CODE128=8]="CODE128",t[t.UCC=9]="UCC",t[t.RSS14=10]="RSS14",t[t.RSS14Truncated=11]="RSS14Truncated",t[t.RSSLimited=12]="RSSLimited",t[t.RSSExpanded=13]="RSSExpanded"}(f||(f={})),function(t){t[t.NotPrinted=0]="NotPrinted",t[t.Above=1]="Above",t[t.Below=2]="Below",t[t.Both=3]="Both"}(l||(l={})),function(t){t[t.Color1=0]="Color1",t[t.Color2=1]="Color2"}(c||(c={})),function(t){t[t.Normal=0]="Normal",t[t.DualHeight=16]="DualHeight",t[t.DualWidth=32]="DualWidth",t[t.DualWidthAndHeight=48]="DualWidthAndHeight"}(E||(E={})),function(t){t[t.Normal=0]="Normal",t[t.DualWidth=1]="DualWidth",t[t.DualHeight=2]="DualHeight",t[t.DualWidthAndHeight=3]="DualWidthAndHeight"}(O||(O={})),function(t){t[t.Single8Dot=0]="Single8Dot",t[t.Double8Dot=1]="Double8Dot",t[t.Single24Dot=32]="Single24Dot",t[t.Double24Dot=33]="Double24Dot"}(d||(d={})),function(t){t[t.PC437=0]="PC437",t[t.Katakana=1]="Katakana",t[t.PC850=2]="PC850",t[t.PC860=3]="PC860",t[t.PC863=4]="PC863",t[t.PC865=5]="PC865",t[t.WPC1252=16]="WPC1252",t[t.PC866=17]="PC866",t[t.PC852=18]="PC852",t[t.PC858=19]="PC858",t[t.Thai42=20]="Thai42",t[t.Thai11=21]="Thai11",t[t.Thai13=22]="Thai13",t[t.Thai14=23]="Thai14",t[t.Thai16=24]="Thai16",t[t.Thai17=25]="Thai17",t[t.Thai18=26]="Thai18"}(A||(A={})),function(t){t[t.L=48]="L",t[t.M=49]="M",t[t.Q=50]="Q",t[t.H=51]="H"}(L||(L={})),function(t){t[t.Level1=48]="Level1",t[t.Level2=49]="Level2",t[t.Level3=50]="Level3",t[t.Level4=51]="Level4",t[t.Level5=52]="Level5",t[t.Level6=53]="Level6",t[t.Level7=54]="Level7",t[t.Level8=55]="Level8"}(p||(p={})),function(t){t[t.Standard=0]="Standard",t[t.Truncated=1]="Truncated"}(R||(R={}));var D=function(t){var e="";switch(t.toUpperCase()){case"B":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL_OFF;break;case"I":e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL_OFF;break;case"U":e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL_ON;break;case"U2":e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL2_ON;break;case"BI":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL_OFF;break;case"BIU":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL_ON;break;case"BIU2":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL2_ON;break;case"BU":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL_ON;break;case"BU2":e+=F.TEXT_FORMAT.TXT_BOLD_ON,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL2_ON;break;case"IU":e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL_ON;break;case"IU2":e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_ON,e+=F.TEXT_FORMAT.TXT_UNDERL2_ON;break;case"NORMAL":default:e+=F.TEXT_FORMAT.TXT_BOLD_OFF,e+=F.TEXT_FORMAT.TXT_ITALIC_OFF,e+=F.TEXT_FORMAT.TXT_UNDERL_OFF}return e},S=27,X=function(){function t(){this.encoder=new TextEncoder,this.size=48}return t.prototype.init=function(){return this.buffer=new C,this.write(S),this.write("@"),this},t.prototype.flush=function(){return this.buffer.flush()},t.prototype.feed=function(t){return void 0===t&&(t=1),this.write(S),this.write("d"),this.write(t),this},t.prototype.cut=function(t){return void 0===t&&(t="full"),this.write(29),this.write("V"),this.write("full"===t?1:0),this},t.prototype.writeLine=function(t){return this.write(t+"\n")},t.prototype.drawLine=function(){for(var t="",e=0;e<this.size;e++)t+="-";return this.write(t+"\n")},t.prototype.setPageSize=function(t){return this.size=t,this},t.prototype.writeTable=function(t){for(var e=this.size/t.length,i="",r=0;r<t.length;r++){i+=t[r].toString();for(var n=e-t[r].toString().length,o=0;o<n;o++)i+=" "}return this.write(i+"\n")},t.prototype.writeCustomTable=function(t,e){(e=e||{size:[]}).size=e.size||[];for(var i=s(e.size||[],2),r=i[0],n=void 0===r?1:r,o=i[1],T=void 0===o?1:o,u=Math.floor(this.size/n),h=Math.floor(u/t.length),a=u-h*t.length,_="",f=!1,l=[],c=0;c<t.length;c++){var E=t[c],O=(E.align||"").toUpperCase(),d=!1;E.text=E.text.toString();var A=E.text.length;if(E.width?h=u*E.width:E.cols&&(h=E.cols),h<A&&(d=!0,E.originalText=E.text,E.text=E.text.substring(0,h)),"CENTER"===O){for(var L=(h-A)/2,p=0;p<L;p++)_+=" ";""!==E.text&&(E.style?_+=D(E.style)+E.text+D("NORMAL"):_+=E.text);for(p=0;p<L-1;p++)_+=" "}else if("RIGHT"===O){L=h-A;a>0&&(L+=a,a=0);for(p=0;p<L;p++)_+=" ";""!==E.text&&(E.style?_+=D(E.style)+E.text+D("NORMAL"):_+=E.text)}else{""!==E.text&&(E.style?_+=D(E.style)+E.text+D("NORMAL"):_+=E.text);L=Math.floor(h-A);a>0&&(L+=a,a=0);for(p=0;p<L;p++)_+=" "}d?(f=!0,E.text=E.originalText.substring(h),l.push(E)):(E.text="",l.push(E))}return n>1&&(_=F.TEXT_FORMAT.TXT_CUSTOM_SIZE(n,T)+_+F.TEXT_FORMAT.TXT_NORMAL),this.write(_+"\n"),f?this.writeCustomTable(l,e):(e.feed&&this.feed(e.feed),e.drawLine&&this.drawLine(),this)},t.prototype.setInverse=function(t){return void 0===t&&(t=!0),this.write(29),this.write("B"),this.write(t?1:0),this},t.prototype.setUnderline=function(t){return void 0===t&&(t=!0),this.write(S),this.write("-"),this.write(t?1:0),this},t.prototype.setJustification=function(t){var e;switch(void 0===t&&(t="left"),t){case"center":e=1;break;case"right":e=2;break;default:e=0}return this.write(S),this.write("a"),this.write(e),this},t.prototype.setBold=function(t){return void 0===t&&(t=!0),this.write(S),this.write("E"),this.write(t?1:0),this},t.prototype.raster=function(t,e){void 0===e&&(e=O.Normal);var i=new Uint8Array([29,118,48,e]),r=t.toRaster();return this.write(i),this.write(r.width,16),this.write(r.height,16),this.write(r.data),this},t.prototype.setSize=function(t){return void 0===t&&(t="normal"),this.write(S),this.write("!"),this.write("normal"===t?0:48),this},t.prototype.write=function(t,e){return void 0===e&&(e=8),"number"==typeof t?(8==e&&this.buffer.writeUInt8(t),16==e&&this.buffer.writeUInt16LE(t),32==e&&this.buffer.writeUInt32LE(t)):"string"==typeof t?this.buffer.write(this.encoder.encode(t)):this.buffer.write(t),this},t}(),v=function(){function t(){}return t.prototype.init=function(){return this.builder=new X,this.builder.init(),this},t.prototype.cut=function(t){return void 0===t&&(t="full"),this.builder.cut(t),this},t.prototype.feed=function(t){return void 0===t&&(t=1),this.builder.feed(t),this},t.prototype.setInverse=function(t){return void 0===t&&(t=!0),this.builder.setInverse(t),this},t.prototype.setBold=function(t){return void 0===t&&(t=!0),this.builder.setBold(t),this},t.prototype.setUnderline=function(t){return void 0===t&&(t=!0),this.builder.setUnderline(t),this},t.prototype.setJustification=function(t){return void 0===t&&(t="left"),this.builder.setJustification(t),this},t.prototype.setSize=function(t){return void 0===t&&(t="normal"),this.builder.setSize(t),this},t.prototype.writeLine=function(t){return void 0===t&&(t=""),this.builder.writeLine(t),this},t.prototype.drawLine=function(){return this.builder.drawLine(),this},t.prototype.writeTable=function(t){return this.builder.writeTable(t),this},t.prototype.setPageSize=function(t){return void 0===t&&(t=48),this.builder.setPageSize(t),this},t.prototype.writeCustomTable=function(t,e){return void 0===e&&(e={}),this.builder.writeCustomTable(t,e),this},t.prototype.image=function(t){return this.builder.raster(t),this},t.prototype.flush=function(){return this.builder.flush()},t}();v.Éµprov=n.ÉµÉµdefineInjectable({factory:function(){return new v},token:v,providedIn:"root"}),v.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[]};var b=function(){function t(t,e,i){this.data=t,this.width=e,this.height=i}return t.prototype.load=function(e){return o(this,void 0,void 0,(function(){return T(this,(function(r){return[2,new Promise((function(r){i.toPixelData(e,{quality:1,backgroundColor:"#ffffff"}).then((function(i){for(var n=new Array(e.scrollWidth*e.scrollHeight),o=0;o<e.scrollHeight;++o)for(var T=0;T<e.scrollWidth;++T){var s=4*o*e.scrollHeight+4*T,u=!1;(this.data[s]<230||this.data[s+1]<230||this.data[s+2]<230)&&(u=!0),u&&this.data[s+3]<=128&&(u=!1),n[this.width*o+T]=u}r(new t(n,e.scrollWidth,e.scrollHeight))}))}))]}))}))},t.prototype.toRaster=function(){for(var t=Math.ceil(this.width/8),e=new Uint8Array(this.height*t),i=0;i<this.height;i++)for(var r=0;r<this.width;r++)this.data[i*this.width+r]&&(e[i*t+(r>>3)]+=128>>(r%8&7));return{data:e,height:this.height,width:t}},t}();t.Image=b,t.VhEscposService=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vh-escpos.umd.min.js.map